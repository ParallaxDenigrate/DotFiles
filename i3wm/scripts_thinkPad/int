#!/bin/bash

ifconfig | grep -q tun0; VPNTUN=$?
case $VPNTUN in
  0)
    VPN=üõ°
    VPNCOLOR="green"
    ;;
  1 | *)
    VPN=üö®
    VPNCOLOR="red"
    ;;
esac

ping -c 2 8.8.8.8 &> /dev/null; WANPING=$?
case $WANPING in
  0)
    WAN=üì°
    WANCOLOR="green"
    WANIP=$(curl ipv4.icanhazip.com | cut -d "." -f 3-4)
    ;;
  1 | *)
    WAN=üöß
    WANCOLOR="red"
    ;;
esac

ping -c 2 192.168.10.42 &> /dev/null; LANPING=$?
case $LANPING in
  0)
    LAN=üè°
    LANCOLOR="green"
#    LANIP=$(ifconfig | grep -e 'enp2s0f1' -e 'wlp3s0' | grep inet | cut -d " " -f 10 | cut -d "." -f 3-4)
    ;;
  1 | *)
    LAN=üöß
    LANCOLOR="red"
    ;;
esac

LOC=$(curl ipinfo.io/city?token=28c0d7bbfaba3d)

echo "  üõ∞ <b>| [<span background=\"$VPNCOLOR\">$VPN</span>]($LOC) [<span background=\"$WANCOLOR\">$WAN</span>]($WANIP) [<span background=\"$LANCOLOR\">$LAN</span>]() |</b>"
